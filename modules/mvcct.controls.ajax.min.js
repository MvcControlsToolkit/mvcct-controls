(function(){(function(){var v=this||(0,eval)("this");(function(g){if("function"===typeof define&&define.amd)define(["../mvcct.controls.min","../../mvcct-enhancer/mvcct.enhancer.min"],g);else if("object"===typeof exports&&"object"===typeof module)module.exports=g(require("../mvcct.controls.min"),require("mvcct-enhancer"));else{var p=v.mvcct=v.mvcct||{};g(p.controls,p.enhancer)}})(function(g,p){function w(b,c,a,d,k,e,f,g,h){r[b]={h:a,g:h,i:c,onerror:k,onprogress:g,c:e,j:f,b:d}}function x(b,c){if(b&&
c)for(var a=0;a<c.length;a++){var d=document.createElement("LI");d.appendChild(document.createTextNode(c[a]));b.appendChild(d)}}function I(b,c){if(b&&b.length){var a=t(c);if(a){var d=a.querySelector(y),k;d&&(q(d),d.classList.remove(z),d.classList.add(A),k=document.createElement("UL"),d.appendChild(k));b.map(function(b){if(b.prefix){var c=a.querySelector('[name="'+b.prefix+'"]');c?(c.classList.add(u),(c=B(c,a))?(c.classList.add(C),c.classList.remove(D),c.appendChild(document.createTextNode(b.f[0]))):
x(k,b.f)):x(k,b.f)}else x(k,b.f)})}}}function H(b){if(b=t(b)){var c=b.querySelector(y);if(c){q(c);c.classList.remove(A);c.classList.add(z);for(var c=b.querySelectorAll("."+u),a=0;a<c.length;a++){var d=c[a];d.classList.remove(u);if(d=B(d,b))d.classList.remove(C),d.classList.add(D),q(d)}}}}function t(b){for(;b&&b.getAttribute;b=b.parentNode)if("FORM"==b.tagName)return b;return null}jQuery=v.jQuery;var l,q,E,F,G,y,z,A,u,D,C,B,r={};g.addHtmlEndpoint=function(b,c,a,d,k,e){w(b,null,null,d,k,c,a,e)};g.addRouterEndpoint=
function(b,c){w(b,null,c,null,null,null,null,null)};g.addJsonEndpoint=function(b,c,a,d,k,e,f,g){w(b,a,null,d,k,e,f,g,c)};g.removeEndpoint=function(b){delete r[b]};g.postJson=function(b,c,a,d,k,e,f,g,h){var m=new XMLHttpRequest;m.open("POST",c,!0);m.setRequestHeader("Content-type","application/json");d&&m.setRequestHeader("Authorization","Bearer "+d);m.onload=function(){200!=m.status?(g?g(b):null,f?f(e?e(m.status):""):null):(k(JSON.parse(m.responseText)),g?g(b):null)};m.onerror=function(){g?g(b):null;
f?f(e?e(m.status):""):null};m.onprogress=h;m.send(JSON.stringify(a))};g.getContent=function(b,c,a,d,g,e,f,l){var h=new XMLHttpRequest;h.open("GET",c,!0);a&&h.setRequestHeader("Authorization","Bearer "+a);h.onload=function(){h.responseText&&"#"==h.responseText.charAt(0)?(f?f(b):null,e?e(h.responseText.substring(1)):null):200!=h.status?(f?f(b):null,e?e(g?g(h.status):""):null):(d(h.responseText),f?f(b):null)};h.onerror=function(){f?f(b):null;e?e(g?g(h.status):""):null};h.onprogress=l;h.send()};g.postForm=
function(b,c,a,d,k,e,f,l,h){var m=t(b);if(E(m)){h&&h(b);g.clearErrors(b);var n=new XMLHttpRequest;c=c||m.getAttribute("action");h=[].filter.call(m.elements,function(a){return"radio"!=a.type&&"checkbox"!=a.type||a.checked}).filter(function(a){return!!a.name}).filter(function(a){return!a.disabled}).map(function(a){return encodeURIComponent(a.name)+"="+encodeURIComponent(a.value)}).join("&");a&&(h?h=h+"&"+a:h=a);n.open("POST",c,!0);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");
n.onload=function(){if(n.responseText&&"["==n.responseText.trim().charAt(0)){var a=JSON.parse(n.responseText);0<a.length&&F(a,m);f?f(b):null}else n.responseText&&"#"==n.responseText.charAt(0)?(f?f(b):null,e?e(n.responseText.substring(1)):null):200!=n.status?(f?f(b):null,e?e(k?k(n.status):""):null):(d(n.responseText),f?f(b):null)};n.onerror=function(){f?f(b):null;e?e(k?k(n.status):""):null};n.onprogress=l;n.send(h)}};p.register(null,null,function(b){l=b.ajax||{};q=l.empty||function(b){b&&(b.innerHTML=
"");jQuery?jQuery(b).empty():b.innerHTML=""};E=l.validateForm||function(b){return jQuery&&jQuery.validator?jQuery(b).closest("form").validate().form():!0};G=l.clearErrors||H;F=l.dispatchServerErrors||I;G=l.clearErrors||H;y=l.validationSummarySelector||'[data-valmsg-summary="true"], [data-valmsg-ajax="true"]';z=l.validationSummaryValidClass||"validation-summary-valid";A=l.validationSummaryInvalidClass||"validation-summary-errors";u=l.fieldErrorClass||"input-validation-error";D=l.errorLabelValidClass||
"field-validation-valid";C=l.errorLabelInvalidClass||"field-validation-error";B=l.errorLabelLocator||function(b,a){return(a=a||t(b))?a.querySelector('[data-val-msg-for="'+b.name+'"]'):null};g.dispatchServerErrors=F;g.clearErrors=G;g.validateForm=E},"ajax",null);g.addOperation("ajax-html_click",function(b){var c=b.href,a=b.target,d=b.args,g=d[0],e=b.proc||1<d.length?r(d[1]):{},f=new XMLHttpRequest;f.open("GET",c||a.getAttribute("href"),!0);f.onload=function(){f.responseText&&"#"==f.responseText.charAt(0)?
(e.a?e.a(a):null,e.onerror?e.onerror(f.responseText.substring(1)):null):200!=f.status?(e.a?e.a(a):null,e.onerror?e.onerror(a.getAttribute("data-error-message")||""):null):(a=document.getElementById(g),q(a),a.innerHTML=f.responseText,p.transform(a),e.a?e.a(a):null)};f.onerror=function(){e.a?e.a(a):null;e.onerror?e.onerror(a.getAttribute("data-error-message")||""):null};e.c?e.c(a):null;f.send()});g.addOperation("ajax-json_click",function(b){var c=b.target,a=r[b.args[0]];if(a.h)a.h(c.getAttribute("href"));
else{var d=new XMLHttpRequest;d.open("GET",c.getAttribute("href"),!0);a.g&&d.setRequestHeader("Authorization","Bearer "+a.g);d.onload=function(){200!=d.status?(a.a?a.a(c):null,a.onerror?a.onerror(a.b?a.b(d.status):""):null):(a.i(JSON.parse(d.responseText)),a.a?a.a(c):null)};d.onerror=function(){a.a?a.a(c):null;a.onerror?a.onerror(a.b?a.b(d.status):""):null};d.onprogress=a.onprogress;a.c?a.c(c):null;d.send()}});return g})})()})();
