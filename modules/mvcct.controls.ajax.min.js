(function(){(function(){var v=this||(0,eval)("this");(function(f){if("function"===typeof define&&define.amd)define(["../mvcct.controls","../../mvcct-enhancer/mvcct.enhancer.min"],f);else if("object"===typeof exports&&"object"===typeof module)module.exports=f(require("../mvcct.controls"),require("mvcct-enhancer"));else{var q=v.mvcct=v.mvcct||{};f(q.controls,q.enhancer)}})(function(f,q){function w(b,a,c,d,e,l,n,f,g){r[b]={h:c,g:g,j:a,onerror:e,onprogress:f,f:l,a:n,c:d}}function x(b,a){if(b&&a)for(var c=
0;c<a.length;c++){var d=document.createElement("LI");d.appendChild(document.createTextNode(a[c]));b.appendChild(d)}}function K(b,a){if(b&&b.length){var c=t(a);if(c){var d=c.querySelector(y),e;d&&(m(d),d.classList.remove(z),d.classList.add(A),e=document.createElement("UL"),d.appendChild(e));b.map(function(a){if(a.prefix){var b=c.querySelector('[name="'+a.prefix+'"]');b?(b.classList.add(u),(b=B(b,c))?(b.classList.add(C),b.classList.remove(D),b.appendChild(document.createTextNode(a.errors[0]))):x(e,
a.errors)):x(e,a.errors)}else x(e,a.errors)})}}}function I(b){if(b=t(b)){var a=b.querySelector(y);if(a){m(a);a.classList.remove(A);a.classList.add(z);for(var a=b.querySelectorAll("."+u),c=0;c<a.length;c++){var d=a[c];d.classList.remove(u);if(d=B(d,b))d.classList.remove(C),d.classList.add(D),m(d)}}}}function t(b){for(;b&&b.getAttribute;b=b.parentNode)if("FORM"==b.tagName)return b;return null}function J(b){var a=b.target,c=b.args,d=b.proc||1<c.length?r[c[1]]:r._default_html_endpoint_,e=new XMLHttpRequest,
l=document.getElementById(c[0]);e.open("GET",b.href||a.getAttribute("href"),!0);e.onload=function(){e.responseText&&"#"==e.responseText.charAt(0)?(d.a?d.a(a,l):null,d.onerror?d.onerror(e.responseText.substring(1)):null):200!=e.status?(d.a?d.a(a,l):null,d.onerror?d.onerror(a.getAttribute("data-error-message")||""):null):(m(l),l.innerHTML=e.responseText,q.transform(l),d.a?d.a(a,l):null)};e.onerror=function(){d.a?d.a(a,l):null;d.onerror?d.onerror(a.getAttribute("data-error-message")||""):null};d.f?d.f(a,
l):null;e.send()}function E(b,a){if(b&&"object"===typeof b)for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])}jQuery=v.jQuery;var g,m,F,G,H,y,z,A,u,D,C,B;f.standardLoading=function(b,a){var c=a.getBoundingClientRect(),d=c.width,c=c.height,e=document.createElement("div");e.className="standard-loading";e.style.left=0;e.style.top=0;e.style.position="absolute";e.style.opacity=.5;e.style.backgroundColor="white";e.style.zIndex=1E4;a._old_postion=a.style.position;a.style.position="relative";
a.childNodes.length?a.insertBefore(e,a.firstChild):a.appendChild(e);e.appendChild(document.createTextNode(" "));e.style.width=d+"px";e.style.height=c+"px"};f.standardUnloading=function(b,a){a.firstChild&&"standard-loading"==a.firstChild.className&&a.firstChild.remove();a.style.position=a._old_postion};f.standardError=function(b){b&&alert(b)};f.attachHtml=J;var r={};f.addHtmlEndpoint=function(b,a,c,d,e,l){w(b,null,null,d,e,a,c,l)};f.addRouterEndpoint=function(b,a){w(b,null,a,null,null,null,null,null)};
f.addJsonEndpoint=function(b,a,c,d,e,l,f,g){w(b,c,null,d,e,l,f,g,a)};f.removeEndpoint=function(b){delete r[b]};f.addHtmlEndpoint("_default_html_endpoint_",f.standardLoading,f.standardUnloading,null,f.standardError);f.postJson=function(b,a,c,d,e,l,f,g,p,m){var k=new XMLHttpRequest;k.open("POST",a,!0);k.setRequestHeader("Content-type","application/json");d&&k.setRequestHeader("Authorization","Bearer "+d);E(m,k);k.onload=function(){200!=k.status?(g?g(b):null,f?f(l?l(k.status):""):null):(e(JSON.parse(k.responseText)),
g?g(b):null)};k.onerror=function(){g?g(b):null;f?f(l?l(k.status):""):null};k.onprogress=p;k.send(JSON.stringify(c))};f.getContent=function(b,a,c,d,e,f,g,m,p,q,k){var h=new XMLHttpRequest;h.open(q||"GET",a,!0);c&&h.setRequestHeader("Authorization","Bearer "+c);k&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded");E(p,h);h.onload=function(){h.responseText&&"#"==h.responseText.charAt(0)?(g?g(b):null,f?f(h.responseText.substring(1)):null):200!=h.status?(g?g(b):null,f?f(e?e(h.status):
""):null):(d(h.responseText),g?g(b):null)};h.onerror=function(){g?g(b):null;f?f(e?e(h.status):""):null};h.onprogress=m;k?h.send(k):h.send()};f.postForm=function(b,a,c,d,e,g,n,m,p,q){var k=t(b);if(F(k)){p&&p(b);f.clearErrors(b);var h=new XMLHttpRequest;a=a||k.getAttribute("action");p=[].filter.call(k.elements,function(a){return"radio"!=a.type&&"checkbox"!=a.type||a.checked}).filter(function(a){return!!a.name}).filter(function(a){return!a.disabled}).map(function(a){return encodeURIComponent(a.name)+
"="+encodeURIComponent(a.value)}).join("&");c&&(p?p=p+"&"+c:p=c);h.open("POST",a,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");E(q,h);h.onload=function(){if(h.responseText&&"["==h.responseText.trim().charAt(0)){var a=JSON.parse(h.responseText);0<a.length&&G(a,k);n?n(b):null}else h.responseText&&"#"==h.responseText.charAt(0)?(n?n(b):null,g?g(h.responseText.substring(1)):null):200!=h.status?(n?n(b):null,g?g(e?e(h.status):""):null):(d(h.responseText),n?n(b):null)};h.onerror=
function(){n?n(b):null;g?g(e?e(h.status):""):null};h.onprogress=m;h.send(p)}};q.register(null,null,function(b){g=b.ajax=b.ajax||{};m=g.empty=g.empty||function(a){if(a)if(jQuery){var b=jQuery(a);if(jQuery.validator&&(a=t(a))&&(a=jQuery.data(a,"validator"))&&(a=a.settings)){var d=a.rules;b.find("[data-val=true]").each(function(){delete d[this.name]})}b.empty()}else a.innerHTML=""};F=g.validateForm=g.validateForm||function(a){return jQuery&&jQuery.validator?jQuery(a).closest("form").validate().form():
!0};H=g.clearErrors||I;G=g.dispatchServerErrors||K;H=g.clearErrors||I;y=g.validationSummarySelector||'[data-valmsg-summary="true"], [data-valmsg-ajax="true"]';z=g.validationSummaryValidClass||"validation-summary-valid";A=g.validationSummaryInvalidClass||"validation-summary-errors";u=g.fieldErrorClass||"input-validation-error";D=g.errorLabelValidClass||"field-validation-valid";C=g.errorLabelInvalidClass||"field-validation-error";B=g.errorLabelLocator||function(a,b){return(b=b||t(a))?b.querySelector('[data-val-msg-for="'+
a.name+'"]'):null};f.dispatchServerErrors=G;f.clearErrors=H;f.validateForm=F;b=b.serverWidgets=b.serverWidgets||{};b=b.modal=b.modal||{};b.openModal=b.openModal||function(a,b,d){var e=document.getElementById(b);e?(e.firstChild.expando_onSubmit=null,e.firstChild.expando_onSubmitError=null,m(e),e.setAttribute("data-version",d),e.appendChild(a)):(e=document.createElement("DIV"),e.setAttribute("id",b),e.setAttribute("data-version",d),e.appendChild(a),document.body.appendChild(e));q.transform(e);jQuery(a).modal({show:!1,
i:"static"});a.getAttribute("data-destroy-on-close")&&jQuery(a).l("hidden.bs.modal",function(){a.expando_onSubmit=null;a.expando_onSubmitError=null;m(a.parentNode);a.parentNode.parentNode.removeChild(a.parentNode)});jQuery(a).modal("show")};b.closeModal=b.closeModal||function(a){jQuery(a).modal("hide");a.expando_onSubmit=null;a.expando_onSubmitError=null};b.openStaticModal=b.openStaticModal||function(a){var b=jQuery(a);a.expando_created||(b.show(),b.addClass(b.attr("data-class")),b.modal({show:!1,
i:"static"}),b.on("hidden.bs.modal",function(){a.expando_onSubmit=null;a.expando_onSubmitError=null;a.expando_onHidden&&(a.expando_onHidden(),a.expando_onHidden=null)}));b.modal("show")};b.closeStaticModal=b.closeStaticModal||function(a){jQuery(a).modal("hide");a.expando_onSubmit=null;a.expando_onSubmitError=null}},"ajax",null);f.addOperation("ajax-html_click",J);f.addOperation("ajax-json_click",function(b){var a=b.target,c=r[b.args[0]];if(c.h)c.h(a.getAttribute("href"));else{var d=new XMLHttpRequest;
d.open("GET",a.getAttribute("href"),!0);c.g&&d.setRequestHeader("Authorization","Bearer "+c.g);d.onload=function(){200!=d.status?(c.b?c.b(a):null,c.onerror?c.onerror(c.c?c.c(d.status):""):null):(c.j(JSON.parse(d.responseText)),c.b?c.b(a):null)};d.onerror=function(){c.b?c.b(a):null;c.onerror?c.onerror(c.c?c.c(d.status):""):null};d.onprogress=c.onprogress;c.f?c.f(a):null;d.send()}});return f})})()})();
