(function(){(function(){var u=this||(0,eval)("this");(function(k){if("function"===typeof define&&define.amd)define(["../mvcct.controls","../../mvcct-enhancer/mvcct.enhancer.min"],k);else if("object"===typeof exports&&"object"===typeof module)module.exports=k(require("../mvcct.controls"),require("mvcct-enhancer"));else{var p=u.mvcct=u.mvcct||{};k(p.controls,p.enhancer)}})(function(k,p){function v(a,b,c,d,f,e,g,k,l){r[a]={g:c,f:l,i:b,onerror:f,onprogress:k,c:e,l:g,b:d}}function w(a,b){if(a&&b)for(var c=
0;c<b.length;c++){var d=document.createElement("LI");d.appendChild(document.createTextNode(b[c]));a.appendChild(d)}}function J(a,b){if(a&&a.length){var c=q(b);if(c){var d=c.querySelector(x),f;d&&(n(d),d.classList.remove(y),d.classList.add(z),f=document.createElement("UL"),d.appendChild(f));a.map(function(b){if(b.prefix){var a=c.querySelector('[name="'+b.prefix+'"]');a?(a.classList.add(t),(a=A(a,c))?(a.classList.add(B),a.classList.remove(C),a.appendChild(document.createTextNode(b.errors[0]))):w(f,
b.errors)):w(f,b.errors)}else w(f,b.errors)})}}}function H(a){if(a=q(a)){var b=a.querySelector(x);if(b){n(b);b.classList.remove(z);b.classList.add(y);for(var b=a.querySelectorAll("."+t),c=0;c<b.length;c++){var d=b[c];d.classList.remove(t);if(d=A(d,a))d.classList.remove(B),d.classList.add(C),n(d)}}}}function q(a){for(;a&&a.getAttribute;a=a.parentNode)if("FORM"==a.tagName)return a;return null}function I(a){var b=a.href,c=a.target,d=a.args,f=d[0],e=a.proc||1<d.length?r(d[1]):{},g=new XMLHttpRequest;
g.open("GET",b||c.getAttribute("href"),!0);g.onload=function(){g.responseText&&"#"==g.responseText.charAt(0)?(e.a?e.a(c):null,e.onerror?e.onerror(g.responseText.substring(1)):null):200!=g.status?(e.a?e.a(c):null,e.onerror?e.onerror(c.getAttribute("data-error-message")||""):null):(c=document.getElementById(f),n(c),c.innerHTML=g.responseText,p.transform(c),e.a?e.a(c):null)};g.onerror=function(){e.a?e.a(c):null;e.onerror?e.onerror(c.getAttribute("data-error-message")||""):null};e.c?e.c(c):null;g.send()}
function D(a,b){if(a&&"object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&b.setRequestHeader(c,a[c])}jQuery=u.jQuery;var l,n,E,F,G,x,y,z,t,C,B,A;k.attachHtml=I;var r={};k.addHtmlEndpoint=function(a,b,c,d,f,e){v(a,null,null,d,f,b,c,e)};k.addRouterEndpoint=function(a,b){v(a,null,b,null,null,null,null,null)};k.addJsonEndpoint=function(a,b,c,d,f,e,g,k){v(a,c,null,d,f,e,g,k,b)};k.removeEndpoint=function(a){delete r[a]};k.postJson=function(a,b,c,d,f,e,g,k,l,n){var m=new XMLHttpRequest;m.open("POST",
b,!0);m.setRequestHeader("Content-type","application/json");d&&m.setRequestHeader("Authorization","Bearer "+d);D(n,m);m.onload=function(){200!=m.status?(k?k(a):null,g?g(e?e(m.status):""):null):(f(JSON.parse(m.responseText)),k?k(a):null)};m.onerror=function(){k?k(a):null;g?g(e?e(m.status):""):null};m.onprogress=l;m.send(JSON.stringify(c))};k.getContent=function(a,b,c,d,f,e,g,k,l,n,m){var h=new XMLHttpRequest;h.open(n||"GET",b,!0);c&&h.setRequestHeader("Authorization","Bearer "+c);m&&h.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");D(l,h);h.onload=function(){h.responseText&&"#"==h.responseText.charAt(0)?(g?g(a):null,e?e(h.responseText.substring(1)):null):200!=h.status?(g?g(a):null,e?e(f?f(h.status):""):null):(d(h.responseText),g?g(a):null)};h.onerror=function(){g?g(a):null;e?e(f?f(h.status):""):null};h.onprogress=k;m?h.send(m):h.send()};k.postForm=function(a,b,c,d,f,e,g,l,n,p){var m=q(a);if(E(m)){n&&n(a);k.clearErrors(a);var h=new XMLHttpRequest;b=b||m.getAttribute("action");n=[].filter.call(m.elements,
function(b){return"radio"!=b.type&&"checkbox"!=b.type||b.checked}).filter(function(b){return!!b.name}).filter(function(b){return!b.disabled}).map(function(b){return encodeURIComponent(b.name)+"="+encodeURIComponent(b.value)}).join("&");c&&(n?n=n+"&"+c:n=c);h.open("POST",b,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");D(p,h);h.onload=function(){if(h.responseText&&"["==h.responseText.trim().charAt(0)){var b=JSON.parse(h.responseText);0<b.length&&F(b,m);g?g(a):null}else h.responseText&&
"#"==h.responseText.charAt(0)?(g?g(a):null,e?e(h.responseText.substring(1)):null):200!=h.status?(g?g(a):null,e?e(f?f(h.status):""):null):(d(h.responseText),g?g(a):null)};h.onerror=function(){g?g(a):null;e?e(f?f(h.status):""):null};h.onprogress=l;h.send(n)}};p.register(null,null,function(a){l=a.ajax=a.ajax||{};n=l.empty=l.empty||function(b){if(b)if(jQuery){var a=jQuery(b);if(jQuery.validator&&(b=q(b))&&(b=jQuery.data(b,"validator"))&&(b=b.settings)){var d=b.rules;a.find("[data-val=true]").each(function(){delete d[this.name]})}a.empty()}else b.innerHTML=
""};E=l.validateForm=l.validateForm||function(b){return jQuery&&jQuery.validator?jQuery(b).closest("form").validate().form():!0};G=l.clearErrors||H;F=l.dispatchServerErrors||J;G=l.clearErrors||H;x=l.validationSummarySelector||'[data-valmsg-summary="true"], [data-valmsg-ajax="true"]';y=l.validationSummaryValidClass||"validation-summary-valid";z=l.validationSummaryInvalidClass||"validation-summary-errors";t=l.fieldErrorClass||"input-validation-error";C=l.errorLabelValidClass||"field-validation-valid";
B=l.errorLabelInvalidClass||"field-validation-error";A=l.errorLabelLocator||function(b,a){return(a=a||q(b))?a.querySelector('[data-val-msg-for="'+b.name+'"]'):null};k.dispatchServerErrors=F;k.clearErrors=G;k.validateForm=E;a=a.serverWidgets=a.serverWidgets||{};a=a.modal=a.modal||{};a.openModal=a.openModal||function(b,a,d){var f=document.getElementById(a);f?(f.firstChild.expando_onSubmit=null,f.firstChild.expando_onSubmitError=null,n(f),f.setAttribute("data-version",d),f.appendChild(b)):(f=document.createElement("DIV"),
f.setAttribute("id",a),f.setAttribute("data-version",d),f.appendChild(b),document.body.appendChild(f));p.transform(f);jQuery(b).modal({show:!1,h:"static"});b.getAttribute("data-destroy-on-close")&&jQuery(b).j("hidden.bs.modal",function(){b.expando_onSubmit=null;b.expando_onSubmitError=null;n(b.parentNode);b.parentNode.parentNode.removeChild(b.parentNode)});jQuery(b).modal("show")};a.closeModal=a.closeModal||function(b){jQuery(b).modal("hide");b.expando_onSubmit=null;b.expando_onSubmitError=null};
a.openStaticModal=a.openStaticModal||function(b){var a=jQuery(b);b.expando_created||(a.show(),a.addClass(a.attr("data-class")),a.modal({show:!1,h:"static"}),a.on("hidden.bs.modal",function(){b.expando_onSubmit=null;b.expando_onSubmitError=null}));a.modal("show")};a.closeStaticModal=a.closeStaticModal||function(a){jQuery(a).modal("hide");a.expando_onSubmit=null;a.expando_onSubmitError=null}},"ajax",null);k.addOperation("ajax-html_click",I);k.addOperation("ajax-json_click",function(a){var b=a.target,
c=r[a.args[0]];if(c.g)c.g(b.getAttribute("href"));else{var d=new XMLHttpRequest;d.open("GET",b.getAttribute("href"),!0);c.f&&d.setRequestHeader("Authorization","Bearer "+c.f);d.onload=function(){200!=d.status?(c.a?c.a(b):null,c.onerror?c.onerror(c.b?c.b(d.status):""):null):(c.i(JSON.parse(d.responseText)),c.a?c.a(b):null)};d.onerror=function(){c.a?c.a(b):null;c.onerror?c.onerror(c.b?c.b(d.status):""):null};d.onprogress=c.onprogress;c.c?c.c(b):null;d.send()}});return k})})()})();
