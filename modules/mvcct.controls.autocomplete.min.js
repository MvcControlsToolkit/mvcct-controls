(function(){(function(){var k=this||(0,eval)("this");(function(g){if("function"===typeof define&&define.amd)define(["../mvcct.controls.min","../../mvcct-enhancer/mvcct.enhancer.min","../../awesomplete/awesomplete.min"],g);else if("object"===typeof exports&&"object"===typeof module)module.exports=g(require("../mvcct.controls.min"),require("mvcct-enhancer"),require("awesomplete"));else{var h=k.mvcct=k.mvcct||{};g(h.controls,h.enhancer,k.Awesomplete)}})(function(g,h,w){function q(a){var b=document.createEvent("HTMLEvents");
b.initEvent("blur",!0,!0);a.dispatchEvent(b);b=document.createEvent("HTMLEvents");b.initEvent("change",!0,!0);a.dispatchEvent(b);a=$(a);(b=a.a("form").c())&&b.element(a)}var l,r={};h.register(null,null,function(a){a=a.serverWidgets||{};l=a.autocomplete||{}},"server autocomplete",null);g.addOperation("autocomplete_focus",function(a){var b=a.target,d=a.args;if(b.getAttribute("data-enhanced-autocomplete"))b.value="";else{b.setAttribute("data-enhanced-autocomplete","true");var c;for(c=b.nextSibling;c&&
1!=c.nodeType;c=c.nextSibling);if(c){b.setAttribute("data-last-value",b.value);c.setAttribute("data-last-value",c.value);b.value="";var h="true"==d[5];a="function"===typeof l?l(target):l;var f,n=a.removeDiacritics?g.removeDiacritics:function(b){return b},t=g.removeDiacritics,m=r[d[2]],u=parseInt(d[4]),v=parseInt(d[3]);m||(r[d[2]]=m=new g.searchDictionary(d[0],u,v,a.maxCacheSize));var p=new w(b,{b:u,f:v,filter:function(b,a){b=n(b).toLowerCase();a=n(a).toLowerCase();return 0<=b.indexOf(a)},data:function(b){return{label:b[d[1]],
value:b[d[1]]}}});b.parentNode.style.display="block";a=style=k.getComputedStyle(b);a.maxWidth&&(b.parentNode.style.maxWidth=a.maxWidth);a.minWidth&&(b.parentNode.style.minWidth=a.minWidth);a=function(a){if("keydown"==a.type){if(9!=(a.keyCode||a.which))return;f&&0<f.length&&b.value!=f[0][d[1]]&&(b.value=f[0][d[1]],a.preventDefault())}a=c.value;var e;if(f)for(e=0;e<f.length;e++)if(t(f[e][d[1]])==t(b.value)){e=f[e][d[0]];c.value=e;b.setAttribute("data-last-value",b.value);c.setAttribute("data-last-value",
c.value);c.value!==a&&q(c);return}((e=h||!b.value)?function(){b.value=""}:function(){b.value=b.getAttribute("data-last-value")})();a=c.value;e=e?"":c.getAttribute("data-last-value");c.value=e;c.value!==a?q(c):(a=$(c),(e=a.a("form").c())&&e.element(a))};b.addEventListener("blur",a,!1);b.addEventListener("keydown",a,!1);b.addEventListener("awesomplete-selectcomplete",a,!1);b.addEventListener("keyup",function(a){if(!(b.value.length<p.b)&&(a=a.keyCode||a.which,9!=a&&37!=a&&38!=a&&39!=a&&40!=a&&27!==a&&
13!==a)){var c=n(b.value).toLowerCase();if(a=m.get(c))p.list=f=a;else{var d=new XMLHttpRequest;d.open("GET",b.getAttribute("data-url").replace(b.getAttribute("data-url-token"),b.value),!0);d.onload=function(){p.list=f=JSON.parse(d.responseText);m.add(c,f)};d.send()}}},!1);setTimeout(function(){b.focus()})}}});return g})})()})();
